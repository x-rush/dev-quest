# 任务讨论阶段模板

> **使用说明**: 在开始任何长时间任务（24H+）之前，Claude Code必须与用户进行详细的任务讨论，确保所有细节都明确无误。

## 🎯 讨论阶段总体流程

### 阶段1: 任务目标深度讨论 (预估30-60分钟)
**目标**: 完全理解用户的真实需求和期望

**Claude引导对话模板**:
```
我需要深入了解这个任务的具体要求，确保我能完全满足你的期望。让我们逐步讨论：

## 1. 核心目标确认
- 你希望这个任务最终达成什么具体成果？
- 这个成果将如何被使用？谁会使用它？
- 成功的标准是什么？怎样算"完成得好"？

## 2. 技术要求和约束
- 有特定的技术栈要求吗？版本限制？
- 性能、安全、可维护性方面的要求？
- 需要遵循什么规范或标准？

## 3. 范围和边界
- 哪些内容必须包含？
- 哪些内容明确排除？
- 有什么灰色地带需要确认？

请详细告诉我这些信息，我会基于你的回答制定执行方案。
```

### 阶段2: 实现细节讨论 (预估60-90分钟)
**目标**: 明确所有实现细节和用户特殊要求

**Claude技术讨论模板**:
```
基于你的目标，我现在需要讨论具体的技术实现细节：

## 1. 架构和结构
- 你偏好什么样的整体架构？
- 文件/目录结构有什么特殊要求？
- 模块化程度要求如何？

## 2. 质量和标准
- 代码详细程度要求？注释要多详细？
- 错误处理策略？保守还是激进？
- 测试覆盖要求？

## 3. 用户体验
- 目标用户的技术水平如何？
- 需要什么样的文档说明？
- 示例代码的复杂度要求？

## 4. 特殊注意点
- 有什么特别需要避免的坑？
- 有什么最佳实践必须遵循？
- 有什么历史经验需要借鉴？

请逐一告诉我你的想法，这直接影响我的执行策略。
```

### 阶段3: 歧义点澄清 (预估30-45分钟)
**目标**: 消除所有可能的歧义和不确定点

**Claude澄清提问模板**:
```
基于我们的讨论，我需要确认一些关键细节，确保理解无误：

## 关键确认点
1. **[具体技术点]**: 我理解你要求[复述理解]，对吗？
2. **[实现方式]**: 关于[某个实现细节]，你倾向于[选项A]还是[选项B]？
3. **[边界情况]**: 当遇到[某种情况]时，你希望我如何处理？
4. **[质量标准]**: 对于[某个质量方面]，你的具体期望是？

## 潜在风险点
- 我发现[某个问题]可能会有风险，你的建议是？
- [某个依赖]可能不稳定，你希望有备用方案吗？

## 决策确认
请确认以下关键决策：
- [ ] 技术栈选择: ________________
- [ ] 架构方案: ________________
- [ ] 质量标准: ________________
- [ ] 时间要求: ________________

如果还有任何不确定的地方，请现在提出，否则我们将基于这些确认开始制定详细执行计划。
```

## 📋 讨论记录模板

### 讨论记录结构
```markdown
# 任务讨论记录

**任务编号**: TASK-[日期]-[序号]
**讨论时间**: [YYYY-MM-DD HH:MM]
**参与者**: 用户, Claude Code
**讨论阶段**: [目标讨论/技术讨论/歧义澄清]

## 🎯 用户需求摘要
### 核心目标
- [主要目标1]
- [主要目标2]

### 关键要求
- [要求1]
- [要求2]

### 特殊注意点
- [注意点1]
- [注意点2]

## 🔧 技术决策记录
### 已确认技术选择
- **技术栈**: [具体选择和版本]
- **架构模式**: [选择的架构]
- **主要工具**: [工具列表]

### 关键设计决策
- **决策1**: [具体决策] - 理由: [用户理由]
- **决策2**: [具体决策] - 理由: [用户理由]

## ⚠️ 识别的风险和约束
### 技术风险
- **风险1**: [描述] - 应对策略: [策略]
- **风险2**: [描述] - 应对策略: [策略]

### 约束条件
- **约束1**: [具体约束]
- **约束2**: [具体约束]

## 📝 待澄清问题
[记录讨论中未解决，需要后续确认的问题]

## ✅ 讨论确认
- [ ] 用户确认所有需求已充分表达
- [ ] Claude确认理解无误
- [ ] 双方确认技术方案可行
- [ ] 同意进入执行计划制定阶段
```

## 🔄 讨论阶段质量检查

### Claude自检清单
在结束讨论前，Claude必须确认：
```markdown
## 讨论质量自检
- [ ] 我是否完全理解了用户的最终目标？
- [ ] 所有关键技术要求都已明确？
- [ ] 用户的所有特殊要求都已记录？
- [ ] 潜在的歧义点都已澄清？
- [ ] 风险点都已识别和讨论？
- [ ] 用户对讨论结果满意吗？
```

### 用户确认清单
```markdown
## 用户确认清单
- [ ] 我已清楚表达了所有要求
- [ ] Claude准确理解了我的需求
- [ ] 技术方案符合我的期望
- [ ] 时间安排合理
- [ ] 质量标准明确
- [ ] 可以开始制定执行计划
```

## 💡 讨论技巧和最佳实践

### Claude的讨论技巧
1. **开放式提问**: 避免"是/否"问题，鼓励详细回答
2. **复述确认**: 经常复述用户的要点，确保理解正确
3. **具体化**: 将模糊的要求转化为具体的指标
4. **举例说明**: 用例子确认理解，如"你的意思是类似XXX这样吗？"
5. **风险预警**: 主动指出潜在问题和风险

### 用户参与技巧
1. **详细描述**: 尽可能详细地描述需求和期望
2. **提供背景**: 说明任务背景和使用场景
3. **明确边界**: 明确说明什么要做，什么不要做
4. **及时反馈**: 对Claude的理解及时确认或纠正
5. **表达偏好**: 明确表达个人偏好和特殊要求

## 🚀 讨论结束标志

### 讨论完成的条件
当且仅当以下条件全部满足时，讨论阶段才能结束：
1. **需求完整**: 用户确认所有需求已充分表达
2. **理解准确**: Claude确认理解无误，并能准确复述
3. **方案明确**: 技术方案和实现路径已明确
4. **风险可控**: 识别的风险都有应对策略
5. **双方确认**: 用户和Claude都确认可以进入下一阶段

### 结束语模板
```
非常好！基于我们的详细讨论，我现在对任务有了完全清晰的理解。接下来我会：

1. 整理我们的讨论记录
2. 制定详细的执行计划文档
3. 生成任务确认书供你检查

请稍等，我会在[预估时间]内为你提供完整的执行计划文档。
```

---

**重要提示**:
- 任何持续超过24小时的任务都必须经过此讨论阶段
- 讨论时间投入是值得的，能显著提高执行质量
- 宁愿多花时间讨论，也不要事后返工
- 所有讨论内容必须记录在案，作为执行依据